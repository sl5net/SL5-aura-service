# Voz a comandos o texto sin conexi√≥n en todo el sistema, sistema conectable

# Servicio SL5 Aura: caracter√≠sticas y compatibilidad del sistema operativo

¬°Bienvenido al Servicio SL5 Aura! Este documento proporciona una descripci√≥n general r√°pida de nuestras funciones clave y su compatibilidad con el sistema operativo.

Aura no es s√≥lo un transcriptor; es un potente motor de procesamiento fuera de l√≠nea que transforma su voz en acciones y texto precisos.

Es un asistente completo fuera de l√≠nea creado sobre Vosk y LanguageTool, dise√±ado para una m√°xima personalizaci√≥n a trav√©s de un sistema de reglas conectable y un motor de secuencias de comandos din√°mico.
  
  
Traducciones: Este documento tambi√©n existe en [other languages](https://github.com/sl5net/SL5-aura-service/tree/master/docs).

Nota: Muchos textos son traducciones generadas autom√°ticamente de la documentaci√≥n original en ingl√©s y est√°n destinados √∫nicamente a proporcionar orientaci√≥n general. En caso de discrepancias o ambig√ºedades, siempre prevalecer√° la versi√≥n en ingl√©s. ¬°Agradecemos la ayuda de la comunidad para mejorar esta traducci√≥n!


[![SL5 Aura (v0.7.0.2): A Deep Dive Under the Hood ‚Äì Live Coding & Core Concepts](https://img.youtube.com/vi/tEijy8WRFCI/maxresdefault.jpg)](https://www.youtube.com/watch?v=tEijy8WRFCI)
(https://skipvids.com/?v=tEijy8WRFCI)

## Caracter√≠sticas clave

* **Sin conexi√≥n y privado:** 100% local. Ning√∫n dato sale nunca de su m√°quina.
* **Motor de scripting din√°mico:** Vaya m√°s all√° del reemplazo de texto. Las reglas pueden ejecutar secuencias de comandos Python personalizadas (`on_match_exec`) para realizar acciones avanzadas como llamar a API (por ejemplo, buscar en Wikipedia), interactuar con archivos (por ejemplo, administrar una lista de tareas pendientes) o generar contenido din√°mico (por ejemplo, un saludo por correo electr√≥nico contextual).
* **Motor de transformaci√≥n de alto control:** Implementa un proceso de procesamiento altamente personalizable y basado en configuraci√≥n. La prioridad de las reglas, la detecci√≥n de comandos y las transformaciones de texto est√°n determinadas exclusivamente por el orden secuencial de las reglas en Fuzzy Maps, lo que requiere **configuraci√≥n, no codificaci√≥n**.
* **Uso conservador de RAM:** Administra de forma inteligente la memoria, precargando modelos solo si hay suficiente RAM libre disponible, lo que garantiza que otras aplicaciones (como los juegos de PC) siempre tengan prioridad.
* **Multiplataforma:** Funciona en Linux, macOS y Windows.
* **Totalmente automatizado:** Administra su propio servidor LanguageTool (pero tambi√©n puede usar uno externo).
* **Incre√≠blemente r√°pido:** El almacenamiento en cach√© inteligente garantiza notificaciones instant√°neas de "escucha..." y un procesamiento r√°pido.

## Documentaci√≥n

Para obtener una referencia t√©cnica completa, incluidos todos los m√≥dulos y scripts, visite nuestra p√°gina de documentaci√≥n oficial. Se genera autom√°ticamente y siempre est√° actualizado.

[**Go to Documentation >>**](https://sl5net.github.io/SL5-aura-service/)


### Estado de compilaci√≥n
[![Linux Manjaro](https://img.shields.io/badge/Manjaro-Tested-27ae60?style=for-the-badge&logo=manjaro)](https://youtu.be/D9ylPBnP2aQ)
[![Linux Ubuntu](https://github.com/sl5net/SL5-aura-service/actions/workflows/ubuntu_setup.yml/badge.svg)](https://github.com/sl5net/SL5-aura-service/actions/workflows/ubuntu_setup.yml)
[![Linux Suse](https://github.com/sl5net/SL5-aura-service/actions/workflows/suse_setup.yml/badge.svg)](https://github.com/sl5net/SL5-aura-service/actions/workflows/suse_setup.yml)
[![macOS](https://github.com/sl5net/SL5-aura-service/actions/workflows/macos_setup.yml/badge.svg)](https://github.com/sl5net/SL5-aura-service/actions/workflows/macos_setup.yml)
[![Windows 11](https://github.com/sl5net/SL5-aura-service/actions/workflows/windows11_setup_bat.yml/badge.svg)](https://github.com/sl5net/SL5-aura-service/actions/workflows/windows11_setup_bat.yml)

[![Documentation](https://img.shields.io/badge/documentation-live-brightgreen)](https://sl5net.github.io/SL5-aura-service/)

**Lea esto en otros idiomas:**

[üá¨üáß English](README.md) | [üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](docs/README/README-arlang.md) | [üá©üá™ Deutsch](docs/README/README-delang.md) | [üá™üá∏ Espa√±ol](docs/README/README-eslang.md) | [üá´üá∑ Fran√ßais](docs/README/README-frlang.md) | [üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](docs/README/README-hilang.md) | [üáØüáµ Êó•Êú¨Ë™û](docs/README/README-jalang.md) | [üá∞üá∑ ÌïúÍµ≠Ïñ¥](docs/README/README-kolang.md) | [üáµüá± Polski](docs/README/README-pllang.md) | [üáµüáπ Portugu√™s](docs/README/README-ptlang.md) | [üáßüá∑ Portugu√™s Brasil](docs/README/README-pt-BRlang.md) | [üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá](docs/README/README-zh-CNlang.md)

---

## Instalaci√≥n

La configuraci√≥n es un proceso de dos pasos:
1. Clona este repositorio en tu computadora.
2. Ejecute el script de configuraci√≥n √∫nica para su sistema operativo.

Los scripts de configuraci√≥n manejan todo: dependencias del sistema, entorno Python y descarga de los modelos y herramientas necesarios (~4 GB) directamente desde nuestras versiones de GitHub para obtener la m√°xima velocidad.

#### Para Linux, macOS y Windows
Abra una terminal en el directorio ra√≠z del proyecto y ejecute el script para su sistema:
```bash
# For Ubuntu/Debian, Manjaro/Arch, macOs  or other derivatives

bash setup/{your-os}_setup.sh

# For Windows in Admin-Powershell

setup/windows11_setup.ps1
```

#### Para Windows
Ejecute el script de configuraci√≥n con privilegios de administrador **"Ejecutar con PowerShell"**.

**Instale una herramienta para leer y ejecutar, p.e. [CopyQ](https://github.com/hluk/CopyQ) o [AutoHotkey v2](https://www.autohotkey.com/)**. Esto es necesario para el observador de escritura de texto.

---

## Uso

### 1. Iniciar los servicios

#### En Linux y macOS
Un √∫nico script se encarga de todo. Inicia el servicio de dictado principal y el observador de archivos autom√°ticamente en segundo plano.
```bash
# Run this from the project's root directory
./scripts/restart_venv_and_run-server.sh
```

#### En Windows
Iniciar el servicio es un **proceso manual de dos pasos**:

1. **Inicie el servicio principal:** Ejecute `start_dictation_v2.0.bat`. o iniciar desde `.venv` el servicio con `python3`

### 2. Configura tu tecla de acceso r√°pido

Para activar el dictado, necesita una tecla de acceso r√°pido global que cree un archivo espec√≠fico. Recomendamos encarecidamente la herramienta multiplataforma [CopyQ](https://github.com/hluk/CopyQ).

#### Nuestra recomendaci√≥n: CopyQ

Cree un nuevo comando en CopyQ con un acceso directo global.

**Comando para Linux/macOS:**
```bash
touch /tmp/sl5_record.trigger
```

**Comando para Windows cuando se usa [CopyQ](https://github.com/hluk/CopyQ):**
```js
copyq:
var filePath = 'c:/tmp/sl5_record.trigger';

var f = File(filePath);

if (f.openAppend()) {
    f.close();
} else {
    popup(
        'error',
        'cant read or open:\n' + filePath
        + '\n' + f.errorString()
    );
}
```


**Comando para Windows cuando se usa [AutoHotkey](https://AutoHotkey.com):**
```sh
; trigger-hotkeys.ahk
; AutoHotkey v2 Skript
#SingleInstance Force ; Stellt sicher, dass nur eine Instanz des Skripts l√§uft

;===================================================================
; Hotkey zum Ausl√∂sen des Aura Triggers
; Dr√ºcke Strg + Alt + T, um die Trigger-Datei zu schreiben.
;===================================================================
f9::
f10::
f11::
{
    local TriggerFile := "c:\tmp\sl5_record.trigger"
    FileAppend("t", TriggerFile)
    ToolTip("Aura Trigger ausgel√∂st!")
    SetTimer(() => ToolTip(), -1500)
}
```


### 3. ¬°Empieza a dictar!
Haga clic en cualquier campo de texto, presione la tecla de acceso r√°pido y aparecer√° una notificaci√≥n "Escuchando...". Habla con claridad y luego haz una pausa. El texto corregido se escribir√° por usted.

---


## Configuraci√≥n avanzada (opcional)

Puede personalizar el comportamiento de la aplicaci√≥n creando un archivo de configuraci√≥n local.

1. Navegue hasta el directorio `config/`.
2. Cree una copia de `settings_local.py_Example.txt` y c√°mbiele el nombre a `settings_local.py`.
3. Edite `settings_local.py` para anular cualquier configuraci√≥n del archivo principal `config/settings.py`.

Este archivo `settings_local.py` es (tal vez) ignorado por Git, por lo que sus cambios personales (tal vez) no ser√°n sobrescritos por las actualizaciones.

### Estructura y l√≥gica del complemento

La modularidad del sistema permite una extensi√≥n s√≥lida a trav√©s del directorio plugins/.

El motor de procesamiento se adhiere estrictamente a una **Cadena de prioridad jer√°rquica**:

1. **Orden de carga de m√≥dulos (prioridad alta):** Las reglas cargadas desde los paquetes de idiomas principales (de-DE, en-US) tienen prioridad sobre las reglas cargadas desde el directorio plugins/ (que se cargan en √∫ltimo lugar alfab√©ticamente).
  
2. **Orden en el archivo (microprioridad):** Dentro de cualquier archivo de mapa determinado (FUZZY_MAP_pre.py), las reglas se procesan estrictamente por **n√∫mero de l√≠nea** (de arriba a abajo).
  

Esta arquitectura garantiza que las reglas centrales del sistema est√©n protegidas, mientras que las reglas espec√≠ficas del proyecto o contextuales (como las de CodeIgniter o los controles del juego) se pueden agregar f√°cilmente como extensiones de baja prioridad a trav√©s de complementos.
## Scripts clave para usuarios de Windows

Aqu√≠ hay una lista de los scripts m√°s importantes para configurar, actualizar y ejecutar la aplicaci√≥n en un sistema Windows.

### Configuraci√≥n y actualizaci√≥n
* `setup/setup.bat`: El script principal para la **configuraci√≥n inicial √∫nica** del entorno.
* [or](https://github.com/sl5net/SL5-aura-service/actions/runs/16548962826/job/46800935182) `Ejecute powershell -Command "Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process -Force; .\setup\windows11_setup.ps1"`

* `update.bat`: ejec√∫telos desde la carpeta del proyecto **obtenga el c√≥digo y las dependencias m√°s recientes**.

### Ejecutando la aplicaci√≥n
* `start_dictation_v2.0.bat`: un script principal para **iniciar el servicio de dictado**.

### Scripts principales y auxiliares
* `dictation_service.py`: el servicio principal de Python (generalmente iniciado por uno de los scripts anteriores).
* `get_suggestions.py`: un script auxiliar para funcionalidades espec√≠ficas.




## üöÄ Funciones clave y compatibilidad con el sistema operativo

Leyenda de compatibilidad del sistema operativo:  
* üêß **Linux** (por ejemplo, Arch, Ubuntu)  
* üçè **macOS**  
* ü™ü **Windows**  
* üì± **Android** (para funciones espec√≠ficas de dispositivos m√≥viles)  

---

### **Motor principal de conversi√≥n de voz a texto (Aura)**
Nuestro motor principal para el reconocimiento de voz y el procesamiento de audio sin conexi√≥n.

  
**Aura-Core/** üêß üçè ü™ü  
‚îú‚îÄ `dictation_service.py` (Servicio principal de Python que orquesta Aura) üêß üçè ü™ü  
‚îú‚î¨ **Recarga en vivo** (Configuraci√≥n y mapas) üêß üçè ü™ü  
‚îÇ‚îú **Procesamiento y correcci√≥n de texto/** Agrupado por idioma (p. ej., `de-DE`, `en-US`, ...)   
‚îÇ‚îú 1. `normalize_punctuation.py` (Estandariza la puntuaci√≥n post-transcripci√≥n) üêß üçè ü™ü  
‚îÇ‚îú 2. **Precorrecci√≥n inteligente** (`FuzzyMap Pre` - [The Primary Command Layer](docs/CreatingNewPluginModules-eslang.md)) üêß üçè ü™ü  
‚îÇ‚îÇ * **Ejecuci√≥n din√°mica de secuencias de comandos:** Las reglas pueden activar secuencias de comandos Python personalizadas (on_match_exec) para realizar acciones avanzadas como llamadas API, E/S de archivos o generar respuestas din√°micas.  
‚îÇ‚îÇ * **Ejecuci√≥n en cascada:** Las reglas se procesan secuencialmente y sus efectos son **acumulativos**. Las reglas posteriores se aplican al texto modificado por reglas anteriores.  
‚îÇ‚îÇ * **Criterio de detenci√≥n de prioridad m√°s alta:** Si una regla logra una **Coincidencia completa** (^...$), todo el proceso de procesamiento para ese token se detiene inmediatamente. Este mecanismo es fundamental para implementar comandos de voz confiables.  
‚îÇ‚îú 3. `correct_text_by_languagetool.py` (Integra LanguageTool para correcci√≥n de gram√°tica/estilo) üêß üçè ü™ü  
‚îÇ‚îî 4. **Postcorrecci√≥n inteligente** (`FuzzyMap`)**‚Äì Refinamiento post-LT** üêß üçè ü™ü  
‚îÇ‚îÇ * Se aplica despu√©s de LanguageTool para corregir resultados espec√≠ficos de LT. Sigue la misma l√≥gica estricta de prioridad en cascada que la capa de correcci√≥n previa.  
‚îÇ‚îÇ * **Ejecuci√≥n din√°mica de secuencias de comandos:** Las reglas pueden activar secuencias de comandos Python personalizadas ([on_match_exec](docs/advanced-scripting-eslang.md)) para realizar acciones avanzadas como llamadas API, E/S de archivos o generar respuestas din√°micas.  
‚îÇ‚îÇ * **Refuerzo difuso:** La **Comprobaci√≥n de similitud difusa** (controlada por un umbral, por ejemplo, 85%) act√∫a como la capa de correcci√≥n de errores de menor prioridad. Solo se ejecuta si toda la ejecuci√≥n de la regla determinista/en cascada anterior no pudo encontrar una coincidencia (current_rule_matched es False), lo que optimiza el rendimiento evitando comprobaciones difusas lentas siempre que sea posible.  
‚îú‚î¨ **Gesti√≥n de modelos/**   
‚îÇ‚îú‚îÄ `prioritize_model.py` (Optimiza la carga/descarga del modelo seg√∫n el uso) üêß üçè ü™ü  
‚îÇ‚îî‚îÄ `setup_initial_model.py` (Configura la configuraci√≥n del modelo por primera vez) üêß üçè ü™ü  
‚îú‚îÄ **Tiempo de espera de VAD adaptable** üêß üçè ü™ü  
‚îú‚îÄ **Tecla de acceso r√°pido adaptable (Iniciar/Detener)** üêß üçè ü™ü  
‚îî‚îÄ **Cambio instant√°neo de idioma** (Experimental mediante precarga del modelo) üêß üçè   

**Utilidades del sistema/**   
‚îú‚î¨ **Administraci√≥n del servidor LanguageTool/**   
‚îÇ‚îú‚îÄ `start_languagetool_server.py` (Inicializa el servidor local de LanguageTool) üêß üçè ü™ü  
‚îÇ‚îî‚îÄ `stop_languagetool_server.py` (Cierra el servidor LanguageTool) üêß üçè
‚îú‚îÄ `monitor_mic.sh` (por ejemplo, para usar con auriculares sin usar teclado ni monitor) üêß üçè ü™ü  

### **Gesti√≥n de modelos y paquetes**  
Herramientas para un manejo s√≥lido de modelos de lenguaje grandes.  

**Gesti√≥n de modelos/** üêß üçè ü™ü  
‚îú‚îÄ **Descargador robusto de modelos** (fragmentos de lanzamiento de GitHub) üêß üçè ü™ü  
‚îú‚îÄ `split_and_hash.py` (Utilidad para que los propietarios de repositorios divida archivos grandes y genere sumas de verificaci√≥n) üêß üçè ü™ü  
‚îî‚îÄ `download_all_packages.py` (Herramienta para que los usuarios finales descarguen, verifiquen y vuelvan a ensamblar archivos de varias partes) üêß üçè ü™ü  


### **Ayudantes de desarrollo e implementaci√≥n**  
Scripts para la configuraci√≥n, prueba y ejecuci√≥n del servicio del entorno.  

**DevHelpers/**  
‚îú‚î¨ **Gesti√≥n del entorno virtual/**  
‚îÇ‚îú `scripts/restart_venv_and_run-server.sh` (Linux/macOS) üêß üçè  
‚îÇ‚îî `scripts/restart_venv_and_run-server.ahk` (Windows) ü™ü  
‚îú‚î¨ **Integraci√≥n de dictado en todo el sistema/**  
‚îÇ‚îú Integraci√≥n Vosk-System-Listener üêß üçè ü™ü  
‚îÇ‚îú `scripts/monitor_mic.sh` (monitoreo de micr√≥fono espec√≠fico de Linux) üêß  
‚îÇ‚îî `scripts/type_watcher.ahk` (AutoHotkey escucha el texto reconocido y lo escribe en todo el sistema) ü™ü  
‚îî‚îÄ **Automatizaci√≥n CI/CD/**  
‚îî‚îÄ Flujos de trabajo de GitHub ampliados (instalaci√≥n, pruebas, implementaci√≥n de documentos) üêß üçè ü™ü *(Se ejecuta en GitHub Actions)*  

### **Pr√≥ximas funciones/experimentales**  
Funciones actualmente en desarrollo o en estado de borrador.  

**Caracter√≠sticas experimentales/**  
‚îú‚îÄ **ENTER_AFTER_DICTATION_REGEX** Ejemplo de regla de activaci√≥n "(ExampleAplicationThatNotExist|Pi, tu IA personal)" üêß  
‚îú‚î¨Complementos  
‚îÇ‚ï∞‚î¨ **Live Lazy-Reload** (*) üêß üçè ü™ü  
(*Los cambios en la activaci√≥n/desactivaci√≥n del complemento y sus configuraciones se aplican en la siguiente ejecuci√≥n del procesamiento sin reiniciar el servicio.*)  
‚îÇ ‚îú **comandos git** (control de voz para enviar comandos git) üêß üçè ü™ü  
‚îÇ ‚îú **wannweil** (Mapa de ubicaci√≥n Alemania-Wannweil) üêß üçè ü™ü  
‚îÇ ‚îú **Complemento de p√≥quer (Draft)** (Control por voz para aplicaciones de p√≥quer) üêß üçè ü™ü  
‚îÇ ‚îî **Complemento 0 A.D. (borrador)** (control por voz para el juego 0 A.D.) üêß   
‚îú‚îÄ **Salida de sonido al iniciar o finalizar una sesi√≥n** (Descripci√≥n pendiente) üêß   
‚îú‚îÄ **Salida de voz para personas con discapacidad visual** (Descripci√≥n pendiente) üêß üçè ü™ü  
‚îî‚îÄ **Prototipo de Android SL5 Aura** (A√∫n no est√° completamente fuera de l√≠nea) üì±  

---

*(Nota: Distribuciones de Linux espec√≠ficas como Arch (ARL) o Ubuntu (UBT) est√°n cubiertas por el s√≠mbolo general de Linux üêß. Es posible que se cubran distinciones detalladas en las gu√≠as de instalaci√≥n).*









<detalles>
<summary>Haga clic para ver el comando utilizado para generar esta lista de scripts</summary>

```bash
{ find . -maxdepth 1 -type f \( -name "dictation_service.py" -o -name "get_suggestions.py" \) ; find . -path "./.venv" -prune -o -path "./.env" -prune -o -path "./backup" -prune -o -path "./LanguageTool-6.6" -prune -o -type f \( -name "*.bat" -o -name "*.ahk" -o -name "*.ps1" \) -print | grep -vE "make.bat|notification_watcher.ahk"; }
```
</detalles>


### bit mira gr√°ficamente para ver qu√© hay detr√°s:

![yappi_call_graph](doc_sources/DeveloperGuide_Generating_ServiceCallGraph/yappi_call_graph_stripped.svg_20251024_010459.png "doc_sources/DeveloperGuide_Generating_ServiceCallGraph/yappi_call_graph_stripped.svg_20251024_010459.png")

  
![pydeps -v -o dependencies.svg scripts/py/func/main.py](doc_sources/dependencies.svg)


# Modelos usados:

Recomendaci√≥n: utilice modelos de Mirror https://github.com/sl5net/SL5-aura-service/releases/tag/v0.2.0.1 (probablemente m√°s r√°pido)

Estos modelos comprimidos deben guardarse en la carpeta `modelos/`

`mv vosk-model-*.zip modelos/`


| Modelo | Tama√±o | Tasa de error de palabra/Velocidad | Notas | Licencia |
| -------------------------------------------------------------------------------------- | ---- | --------------------------------------------------------------------------------------- | ----------------------------------------- | ---------- |
| [vosk-model-en-us-0.22](https://alphacephei.com/vosk/models/vosk-model-en-us-0.22.zip) | 1,8G | 5.69 (prueba de limpieza de librispeech)<br/>6.05 (tedlium)<br/>29.78 (centro de llamadas) | Modelo gen√©rico preciso en ingl√©s de EE. UU. | Apache 2.0 |
| [vosk-model-de-0.21](https://alphacephei.com/vosk/models/vosk-model-de-0.21.zip) | 1,9G | 9,83 (prueba Tuda-de)<br/>24,00 (podcast)<br/>12,82 (prueba cv)<br/>12,42 (mls)<br/>33,26 (mtedx) | Gran modelo alem√°n para telefon√≠a y servidor | Apache 2.0 |

Esta tabla proporciona una descripci√≥n general de los diferentes modelos de Vosk, incluido su tama√±o, velocidad o tasa de error de palabras, notas e informaci√≥n de licencia.


- **Modelos Vosk:** [Vosk-Model List](https://alphacephei.com/vosk/models)
- **Herramienta de idioma:**  
(6.6) XMLDLINK34X

**Licencia de LanguageTool:** [GNU Lesser General Public License (LGPL) v2.1 or later](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html)

---

## Apoye el proyecto
Si encuentra √∫til esta herramienta, ¬°considere invitarnos a un caf√©! Su apoyo ayuda a impulsar mejoras futuras.

[![ko-fi](https://storage.ko-fi.com/cdn/useruploads/C0C445TF6/qrcode.png?v=5151393b-8fbb-4a04-82e2-67fcaea9d5d8?v=2)](https://ko-fi.com/C0C445TF6)

[Stripe-Buy Now](https://buy.stripe.com/3cIdRa1cobPR66P1LP5kk00)